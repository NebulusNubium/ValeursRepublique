{% extends 'base.html.twig' %}
{% block title %}Jeu de Loi{% endblock %}
{# {% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('styles/style.css') }}">
{% endblock %} #}
{% block main  %}
    <div id="game" data-victoire-image="{{ asset('img/felicitation.png') }}">
        <div class="header">
            <h1>Jeu de Loi</h1>
            <h2>Les valeurs de la R√©publique</h2>
            <div id="timer">‚è± 0:00</div>
        </div>
      
        <div class="board-container">
            <div class="pion" id="pion"><img src="{{ asset('img/pion.png') }}" alt="Pion" style="width: 80px;"></div>
            <div class="carrousel-wrapper">
                <div class="carrousel" id="carrousel"></div>
            </div>
        </div>

        <div id="questionBox">
            <p id="questionText">Clique sur lancer pour d√©marrer</p>
            <div id="choices"></div>
            <a id="sourceLink" href="#" target="_blank" style="display:none">Voir source officielle</a>
        </div>

        <button id="rollBtn">üé≤ Lancer le d√©</button>
        <button id="rulesBtn" style="margin-left: 10px;">üìú Voir les r√®gles</button>

        <div id="playerNameForm" style="margin-top: 1rem;">
            <label for="playerNameInput">Votre nom :</label>
            <input type="text" id="playerNameInput" placeholder="Entrez votre nom" maxlength="50">
        </div>

        <div id="leaderboard" style="margin-top: 2rem;">
            <h3>Meilleurs scores</h3>
            <ul>
                {% for score in top_scores %}
                    <li>{{ score.playerName }} : {{ score.timeInSeconds // 60 }}:{{ score.timeInSeconds % 60 < 10 ? '0' : '' }}{{ score.timeInSeconds % 60 }}</li>
                {% else %}
                    <li>Aucun score enregistr√© pour le moment.</li>
                {% endfor %}
            </ul>
            {% if current_user_score %}
                <p>Votre score : {{ current_user_score.playerName }} - {{ current_user_score.timeInSeconds // 60 }}:{{ current_user_score.timeInSeconds % 60 < 10 ? '0' : '' }}{{ current_user_score.timeInSeconds % 60 }}</p>
            {% endif %}
        </div>
        <!-- Modale pour les r√®gles -->
        <div id="rulesModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span id="closeModal" class="close">&times;</span>
                <h2>R√®gles du Jeu de Loi</h2>
                <p>
            Bienvenue dans ce jeu de plateau √©ducatif sur les valeurs de la R√©publique fran√ßaise ! <br>Avancez sur un parcours de 50 cases et testez vos connaissances sur la Libert√©, l‚Äô√âgalit√©, la Fraternit√© et la La√Øcit√©.<br><br>

            Objectif : <br>
            - Atteignez la case Arriv√©e le plus rapidement possible.<br>
            - Votre temps final est enregistr√© dans le classement. Entrez votre nom pour personnaliser votre score !
            <br><br>

            D√©roulement du Jeu :<br>
            - Lancer le d√© : Cliquez sur "Lancer le d√©" pour avancer de 1 √† 6 cases.<br>
            - Questions : √Ä chaque arr√™t, r√©pondez √† une question sur les valeurs r√©publicaines.<br>
              - Bonne r√©ponse : Restez sur la case. Pour les questions de niveau 2, gagnez un bonus (jusqu'√† +2 cases).<br>
              - Mauvaise r√©ponse : Reculez √† la case pr√©c√©dente. Trois erreurs cons√©cutives : retour √† la case D√©part (transform√©e en "Prison") + p√©nalit√© de 10 secondes.
                <br><br>
            Cases Sp√©ciales :<br>
            - Banqueroute (toutes les 7 cases, sauf la premi√®re) : Reculez d‚Äôune case.<br>
            - Prison (case 13) : Tour bloqu√© pendant 2 secondes.<br>
            - D√©part : Point de d√©part, devient "Prison" apr√®s deux erreurs cons√©cutives.<br>
            - Arriv√©e (case 50) : Terminez le jeu et enregistrez votre score.<br><br>

            Conseils :<br>
            - R√©pondez vite et bien pour minimiser votre temps.<br>
            - Consultez les sources fournies pour approfondir vos connaissances.<br>
            - Amusez-vous tout en apprenant les valeurs de la R√©publique fran√ßaise !<br>
        </p>
            </div>
    </div>

    <script src="{{ asset('js/board_game_republic_values.js') }}"></script>
{% endblock %}